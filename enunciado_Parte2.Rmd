---
title: "Proyecto asignatura  Estadística (MAT3) GIN2 Grupos 1 y 3: PARTE 2. CUrso 2020-2021"
author: 'Antoni, Pol Martínez; Josep, Oliver Vallespir; Gabriel, Riutort Álvarez; Jorge, Oliveras Hidalgo'
date: '15/06/2021'
output:
  html_document: 
    toc: yes
    number_sections: yes
  pdf_document: 
    toc: yes
    number_sections: yes
urlcolor: blue
toccolor: blue
header-includes:
  \renewcommand{\contentsname}{Contenidos}
---

A mi grupo le ha tocado de la web [web de Airbnb](http://insideairbnb.com/get-the-data.html), Madrid, Ciudad de Madrid, España.


# Parte 2: Estadística Inferencial

Supongamos  que los datos de la ciudad que ha sido asignada a cada grupo corresponden a una muestra
aleatoria simple de todas las viviendas que se podrían alquilar en la ciudad.
Utilizando esta muestra se pide:

Cargamos los datos.

```{r, echo = FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
```

```{r, echo=FALSE, message=FALSE, results='hide'}
#Genera un data frame leido con tidyverse
data_Madrid = read_csv("datos/listings.csv")

# Muestra la variable price sin simbolos de dolar convertido a valor numerico
data_Madrid$price = as.numeric(gsub(pattern="[\\$]|[,]",replacement="",data_Madrid$price))

#Creamos otra tabla seleccionando diferentes variables y eliminando los valores NA
df_Madrid = na.omit(data_Madrid %>% select(neighbourhood, host_name, host_location, price, id, bedrooms, beds, host_total_listings_count, accommodates, maximum_nights))

head(df_Madrid)

names(df_Madrid);

# Creamos un vector con los nombres cambiados por orden que estan en el df_Madrid
names(df_Madrid) = c("Vecindario", "Nombre_anfitrion", "Localizacion_anfitrion", "Precio", "ID", "Dormitorios", "Camas", "Recuento_total_listado_anfitrion", "Acomodados", "Maximo_de_noches");

# Muestra el resultado del nuevo dataframe con nombres cambiados
names(df_Madrid)
```
Los datos son:
```{r}
str(df_Madrid)
```


## Solición ejercicio 1

1. Calcular una estimación puntual de la media para la variable `price` y el error estándar del estimador.

El estimador de $\mu$ para el precio es $\overline{x}$ y su error estándar, como no conocemos $\sigma$ del precio es $\sigma_{\overline{x}}\approx\frac{\tilde{s}_x}{sqrt{n}}$, donde $n$ es el número de datos o el tamaño de la muestra

```{r, echo=FALSE}
#Media de la variable Precio
media_precio = mean(df_Madrid$Precio)
#SD de la variable Precio
sd_precio = sd(df_Madrid$Precio)
#Definimos n, como la longitud de la columna precio
n = length(df_Madrid$Precio)
#Calculamos el error estandar de la media del Precio
error_estandar_media_precio = sd_precio/sqrt(n)
```

```{r}
media_precio
sd_precio
n
error_estandar_media_precio
```

-   La media del Precio es `r media_precio` euros.

-   El error estándar es $\frac{\tilde{s}_x}{\sqrt{n}}$ = `r error_estandar_media_precio`.



## Solición ejercicio 2

2. Calcular un intervalo de confianza, al nivel de confianza del 95\%, para la variable `price`.

```{r, echo=FALSE}
#Obtenemos alpha y aplicamos la formula de intervalo de confianza
alpha = 1-0.95
intervalo_conf_precio = c(media_precio - qnorm(1-alpha/2) * sd_precio / sqrt(n), media_precio + qnorm(1-alpha/2) * sd_precio / sqrt(n))
```

-   La función manualmente seria:
$$
\left(\overline{x}-Z_{1-\frac{\alpha}{2}}\cdot \frac{\tilde{S}}{\sqrt{n}},
\overline{x}+Z_{1-\frac{\alpha}{2}}\cdot \frac{\tilde{S}}{\sqrt{n}})\right)
$$
```{r}
alpha
intervalo_conf_precio
```

-   El intervalo de confianza del 95% de la variable Price es: $`r intervalo_conf_precio`$



## Solición ejercicio 3

3. Calcular un intervalo de confianza, al nivel de confianza del 99\%, para la
proporción de viviendas que tienen un `review_scores_rating` inferior a 95\%.

```{r}

```



## Solición ejercicio 4

4. Supongamos que un responsable de Airbnb asegura que la media de los valores de `review_scores_rating`
de las viviendas de su portal es superior a 95. Contrastad esta hipótesis.

```{r}

```



## Solición ejercicio 5

5. Calcular el intervalo de confianza, con un nivel de confianza del 95\%, asociado al contraste del ejercicio anterior.

```{r}

```



## Solición ejercicio 6

6. Considera ahora los datos de `price` para la ciudad de New York del mes de febrero de 2020 ( están en http://insideairbnb.com/get-the-data.html, y debe pulsar en `show archived fecha ). Compararemos los valores de esta variable con los correspondientes a la ciudad que tiene asignada.
Haga un contraste de hipótesis para decidir si las desviaciones típicas de los precios de las dos ciudades son iguales o diferentes. Considera que las distribuciones de los valores de precio en las poblaciones son normales.

```{r}

```



## Solición ejercicio 7

7. A partir de los resultados del apartado anterior contratad la hipótesis de que los precios medios en las dos ciudades son iguales.

```{r}

```



## Solición ejercicio 8

8. Utilice el test de Kolmogorov-Smirnov-Lilliefors para confirmar o rechazar la hipótesis de que la distribución de los valores de la variable `price` es normal, decidid el resultado del contraste  con el $p$-valor.

```{r}

```



## Solición ejercicio 9

9. Analizad  la dependencia entre las variables `Price` y `review_scores_rating` de la ciudad que tiene asignada. Seguid los siguientes pasos:

### a)
    * a) Seleccione del data frame las muestras que tienen valores diferentes de NA por las dos variables.
    
```{r}

```

### b)
    * b) A continuación agrupau los valores de cada variable utilizando los intervalos siguientes: $[ \min, Q_1), [Q_1, Q_2), [Q_2, Q_3)$ y $[Q_3, \max]$.
Los valores $\min$ y $\max$ son el mínimo y el máximo de la variable, respectivamente. Mientras que $Q_1$, $Q_2$ y $Q_3$· representan los cuartiles primero, segundo (mediana) y tercero. Si los valor mínimo y máximo de algún intervalo son iguales elimine este intervalo.

```{r}

```

### c)
    * c) Organizad los datos agrupados en intervalos en una tabla de contingencia `Price` versus `review_scores_rating` .
    
```{r}

```

### d)
    * d) A partir de esta tabla haced un test $\chi^2$ de independencia para determinar si las dos variables son independientes, con un nivel de significación del 0.05.
    
```{r}

```